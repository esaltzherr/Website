<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elroy Saltzherr</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preload" href="images/ProfilePic.jpg" as="image">
    <link rel="preload" href="images/LinkedInLogo.png" as="image">
    <link rel="preload" href="images/GitHubLogo.png" as="image">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>

<body id="top">
    <header id="characterStartPoint">
        <div class="center-text">
            <h1>Elroy Saltzherr</h1>
            <img src="images/ProfilePic.jpg" class="profile-pic" style="width:256px;height:256px;border:0;" />
            <p><a href="mailto:lsaltzherr@gmail.com" class="email-link">lsaltzherr@gmail.com</a></p>
            <p>Hello, I am a UCSC senior Majoring in Computer Science: Game Design</p>
            <p>I have spent a vast majority of my life playing games. Including but not limited to: Minecraft, league of
                legends, Pokemon, and Mario Games.</p>
        </div>
        <nav>
            <ul class="nav-list">
                <li><a href="#Education">Education</a></li>
                <li><a href="#Skills">Skills</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#Links">Links</a></li>
            </ul>
            <a href="javascript:void(0);" id="gameToggleButton" onclick="toggleGameMode()" class="button">Explore as a
                Game</a>
        </nav>
    </header>

    <section id="Education">
        <h2>Education</h2>
        <ul>
            <li>Project Manager</li>
            <li>Github</li>
            <li>G Suite</li>
            <li>Chat GPT</li>
            <li>AI Image Generation</li>
            <li>Programming Languages:
                <ul>
                    <li>JavaScript</li>
                    <li>Java</li>
                    <li>Python</li>
                    <li>C++</li>
                    <li>C#</li>
                    <li>HTML</li>
                </ul>
            </li>
            <li>CAD - Solidworks</li>
            <li>Fabrication</li>
        </ul>
    </section>
    <section id="Skills">
        <h2>Skills</h2>
        <ul>
            <li>Project Manager</li>
            <li>Github</li>
            <li>G Suite</li>
            <li>Chat GPT</li>
            <li>AI Image Generation</li>
            <li>Programming Languages:
                <ul>
                    <li>JavaScript</li>
                    <li>Java</li>
                    <li>Python</li>
                    <li>C++</li>
                    <li>C#</li>
                    <li>HTML</li>
                </ul>
            </li>
            <li>CAD - Solidworks</li>
            <li>Fabrication</li>
        </ul>
    </section>
    <section id="projects">
        <h2>Projects</h2>
        <ul>
            <li>Project Manager</li>
            <li>Github</li>
            <li>G Suite</li>
            <li>Chat GPT</li>
            <li>AI Image Generation</li>
            <li>Programming Languages:
                <ul>
                    <li>JavaScript</li>
                    <li>Java</li>
                    <li>Python</li>
                    <li>C++</li>
                    <li>C#</li>
                    <li>HTML</li>
                </ul>
            </li>
            <li>CAD - Solidworks</li>
            <li>Fabrication</li>
        </ul>
    </section>
    <section id="Links">
        <h2>Links</h2>
        <ul>
            <li>Project Manager</li>
            <li>Github</li>
            <li>G Suite</li>
            <li>Chat GPT</li>
            <li>AI Image Generation</li>
            <li>Programming Languages:
                <ul>
                    <li>JavaScript</li>
                    <li>Java</li>
                    <li>Python</li>
                    <li>C++</li>
                    <li>C#</li>
                    <li>HTML</li>
                </ul>
            </li>
            <li>CAD - Solidworks</li>
            <li>Fabrication</li>
        </ul>
    </section>

    <footer>
        <p>&copy; 2023 Elroy Saltzherr. All rights reserved.</p>
        <a href="#top">Back to Top</a>
    </footer>

    <div id="p5-canvas" style="display:none;"></div>






    <script>
        let gameMode = false;
        let gravity = 1;
        // Character object
        let player = {
            image: null,
            x: 500,
            //x: 1000,
            //y: 470,
            y: 500,
            width: 50,
            height: 50,
            speed: 5,
            jumpStrength: 20,
            velocityY: 0,
            grounded: false,
        };

        // Platforms as an array of objects
        let platforms = [
            { x: 950, y: 600, width: 200, height: 20 },
            { x: 650, y: 500, width: 200, height: 20 },
            { x: 1100, y: 470, width: 50, height: 50 },

            // Add more platform objects as needed
        ];


        function toggleGameMode() {
            gameMode = !gameMode;
            let canvasDiv = document.getElementById('p5-canvas');
            let button = document.getElementById('gameToggleButton');

            if (gameMode) {
                canvasDiv.style.display = 'block';
                button.innerText = 'Go Back to Normal';
            } else {
                canvasDiv.style.display = 'none';
                button.innerText = 'Explore as a Game';
            }
        }

        function preload() {
            player.image = loadImage('images/pixel_art_cute_small_ghost.png');
        }


        let teleporters = []; // Initialize teleporter array

        function createTeleporters() {
            teleporters = []; // Reset teleporters array

            // Create teleporters for navigation links
            document.querySelectorAll('.nav-list li a').forEach((link, index) => {
                const href = link.getAttribute('href'); // Get the corresponding section id
                if (href && href.startsWith("#")) {
                    const targetId = href.substring(1); // Extract the id without '#'
                    const targetElem = document.getElementById(targetId);
                    if (targetElem) {
                        const linkRect = link.getBoundingClientRect();
                        const targetRect = targetElem.getBoundingClientRect();

                        // Assign a unique pair identifier for each teleporter pair
                        const pairId = `pair-${index}`;

                        // Teleporter at navigation link (header)
                        teleporters.push({
                            x: linkRect.left, // Adjust as needed
                            y: linkRect.top + window.scrollY + 10,
                            width: 50,
                            height: 50,
                            target: pairId, // Using the pair ID as target
                            pair: targetId // Linking to its corresponding section
                        });

                        // Corresponding teleporter in the section
                        teleporters.push({
                            x: targetRect.left + window.scrollX + 30, // Adjust as needed
                            y: targetRect.bottom + window.scrollY - 70, // Adjust as needed
                            width: 50,
                            height: 50,
                            target: targetId, // Or any other designated return point
                            pair: pairId // Linking back to its header counterpart
                        });
                    }
                }
            });
        }

        function checkForTeleportation() {
            for (const teleporter of teleporters) {
                // Check if player is within teleporter bounds
                if (
                    player.x < teleporter.x + teleporter.width &&
                    player.x + player.width > teleporter.x &&
                    player.y < teleporter.y + teleporter.height &&
                    player.y + player.height > teleporter.y
                ) {
                    return teleporter; // Return the colliding teleporter
                }
            }
            return null; // No collision with any teleporter
        }

        function teleport(teleporter) {
        const pairTeleporter = teleporters.find(t => t.pair === teleporter.target);
        if (pairTeleporter) {
            player.x = pairTeleporter.x;
            player.y = pairTeleporter.y - player.height; // Adjust so the player appears above the teleporter
            player.velocityY = 0; // Reset velocity to prevent falling through platforms

            // Now scroll the window to the player's new location
            const newX = player.x - (window.innerWidth / 2) + (player.width / 2); // Center horizontally
            const newY = player.y - (window.innerHeight / 2) + (player.height / 2); // Center vertically

            window.scrollTo({
                top: newY,
                left: newX,
                behavior: 'smooth' // Smooth scroll
            });
        }
    }

        function createPlatformsFromSections() {
            platforms = []; // Reset platforms array
            // Select all sections, including header and footer
            document.querySelectorAll('section, header, footer').forEach((elem) => {
                const rect = elem.getBoundingClientRect();
                // Top platform
                platforms.push({
                    x: rect.left + window.scrollX,
                    y: rect.top + window.scrollY - 20, // Adjusted for platform height
                    width: rect.width,
                    height: 20 // Height of the platform
                });
                // Left side platform
                platforms.push({
                    x: rect.left + window.scrollX,
                    y: rect.top + window.scrollY,
                    width: 20, // Width of the side platform
                    height: rect.height // Height of the section
                });
                // Right side platform
                platforms.push({
                    x: rect.right + window.scrollX - 20, // Positioned at the right edge
                    y: rect.top + window.scrollY,
                    width: 20, // Width of the side platform
                    height: rect.height // Height of the section
                });
                // Bottom platform
                platforms.push({
                    x: rect.left + window.scrollX,
                    y: rect.bottom + window.scrollY - 20,
                    width: rect.width,
                    height: 20
                });
            });
        }


        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            createPlatformsFromSections(); // Recreate platforms
            createTeleporters(); // Recreate teleporters
        }

        function setup() {
            let canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent('p5-canvas');
            createPlatformsFromSections(); // Initialize platforms
            createTeleporters(); // Initialize teleporters
        }
        function checkCollision(nextX, nextY) {
            for (let platform of platforms) {
                if (
                    nextX < platform.x + platform.width &&
                    nextX + player.width > platform.x &&
                    nextY < platform.y + platform.height &&
                    nextY + player.height > platform.y
                ) {
                    return platform; // Return the colliding platform
                }
            }
            return null; // No collision
        }

        function draw() {
            clear();
            if (gameMode) {
                // Predict next position
                let nextX = player.x;
                let nextY = player.y + player.velocityY;

                // Check vertical collision (platforms)
                let platformY = checkCollision(player.x, nextY);
                if (platformY) {
                    if (player.velocityY > 0) { // Falling down
                        player.y = platformY.y - player.height; // Place player on top of platform
                        player.velocityY = 0; // Stop falling
                        player.grounded = true;
                    } else if (player.velocityY < 0) { // Moving up
                        player.y = platformY.y + platformY.height; // Hit the bottom of the platform
                        player.velocityY = 0; // Stop upward motion
                    }
                } else {
                    player.y += player.velocityY; // Apply vertical movement
                    player.velocityY += gravity; // Apply gravity
                }

                // Check horizontal collision (platforms)
                if (keyIsDown(65)) { // Move left
                    nextX = player.x - player.speed;
                    let platformX = checkCollision(nextX, player.y);
                    if (!platformX) {
                        player.x = nextX;
                    }
                }
                if (keyIsDown(68)) { // Move right
                    nextX = player.x + player.speed;
                    let platformX = checkCollision(nextX, player.y);
                    if (!platformX) {
                        player.x = nextX;
                    }
                }

                // Handle jump
                if (keyIsDown(87) && player.grounded) {
                    let intersectingTeleporter = checkForTeleportation()
                    if (intersectingTeleporter != null) {
                        player.grounded = false
                        teleport(intersectingTeleporter);
                    }
                    else {
                        player.velocityY = -player.jumpStrength; // Apply jump velocity
                        player.grounded = false; // Player is no longer grounded
                    }
                }


                // Check for teleportation before rendering the player



                teleporters.forEach(teleporter => {
                    fill(0, 255, 0); // Green color for teleporters
                    rect(teleporter.x - window.scrollX, teleporter.y - window.scrollY, teleporter.width, teleporter.height);
                });

                // Render platforms
                for (let platform of platforms) {
                    fill(100); // Platform color
                    rect(platform.x - window.scrollX, platform.y - window.scrollY, platform.width, platform.height);
                }

                // Draw the character at updated position
                image(player.image, player.x - window.scrollX, player.y - window.scrollY, player.width, player.height);
            }
        }


        window.addEventListener('resize', windowResized);
    </script>

</body>

</html>